<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¯¸ì‹ì¶•êµ¬íŒ€ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; }
        header { 
            background-color: #003366; 
            color: white; 
            padding: 15px 20px; 
            text-align: center; 
            cursor: pointer; 
        }
        
        /* NAV ìŠ¤íƒ€ì¼ (Flexbox ì•ˆì •í™”) */
        nav { 
            background-color: #333; 
            display: flex; 
            justify-content: flex-start; 
            align-items: center; 
            flex-wrap: nowrap; 
            padding: 0 10px; 
        }
        nav a { 
            display: block; 
            color: white; 
            text-align: center; 
            padding: 14px 16px; 
            text-decoration: none; 
            font-size: 17px; 
        }
        nav a:hover { background-color: #575757; }
        /* -------------------------------------- */

        .container { padding: 20px; }
        .content-section { background-color: white; padding: 20px; margin-top: 20px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .hidden { display: none; }
        h2 { border-bottom: 2px solid #003366; padding-bottom: 5px; color: #003366; }

/* íŠ¹ì • ìš”ì†Œ ìŠ¤íƒ€ì¼ë§ */
        /* ì¶œì„ ì²´í¬ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ì´ˆë¡ìƒ‰) */
        .attendance-button { 
            background-color: #4CAF50; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
            text-decoration: none; 
            display: inline-block; 
        }
        .attendance-button:hover {
            background-color: #45a049; 
        }
        
        /* ì¥ë¹„ ìš”ì²­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (íŒŒë€ìƒ‰ ê³„ì—´) */
        .request-button { 
            background-color: #003366; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px; 
            text-decoration: none;
            display: inline-block;
            margin-top: 20px; /* ì—¬ë°± ì¶”ê°€ */
        }
        .request-button:hover {
            background-color: #005599; 
        } 		

        .stock-item { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
        .coach-card { border: 1px solid #ddd; padding: 15px; margin-top: 10px; border-radius: 4px; background-color: #f9f9f9; }

        /* í¼ ìŠ¤íƒ€ì¼ */
        .notification-form input[type="text"], .notification-form textarea,
        .schedule-form input[type="text"], .schedule-form input[type="date"], .schedule-form textarea {
            width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;
        }
        /* ğŸ’¡ ì¶”ê°€: ì‹œì‘ì¼/ì¢…ë£Œì¼ ê·¸ë£¹í™” ë° ìŠ¤íƒ€ì¼ë§ */
        .schedule-form label { display: block; margin-bottom: 5px; font-weight: bold; }
        .schedule-date-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .schedule-date-group > div { flex-grow: 1; }
        /* -------------------------------------- */

        .submit-button, .action-button, .delete-button {
            background-color: #003366; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-right: 5px;
        }
        .submit-button:hover, .action-button:hover {
            background-color: #005599;
        }
        .delete-button {
            background-color: #dc3545;
        }
        .delete-button:hover {
            background-color: #c82333;
        }
        .notification-item { border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
        .notification-item h4 { margin-top: 0; color: #003366; }
        .notification-item small { display: block; margin-bottom: 5px; color: #777; }

/* -------------------------------------- */
/* ë‹¬ë ¥ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        #calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 5px;
        }
        #calendar-header button {
            background-color: #003366;
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
        }
        #calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            border: 1px solid #ccc;
            background-color: #ccc;
        }
        .day-header, .calendar-day {
            background-color: white;
            text-align: center;
            padding: 10px 0;
            font-weight: bold;
        }
        .day-header {
            background-color: #e9e9e9;
            padding: 8px 0;
            font-size: 14px;
        }
        .calendar-day {
            min-height: 50px;
            padding: 5px;
            font-weight: normal;
            font-size: 14px;
            cursor: pointer; 
            transition: background-color 0.1s;
        }
        .calendar-day:not(.empty-day):hover {
            background-color: #f0f8ff;
        }
        .calendar-day.today {
            background-color: #fffacd; 
            border: 2px solid #003366;
            box-sizing: border-box;
            padding: 3px;
        }
        .calendar-day.training-day {
            background-color: #d4edda; 
        }
        .empty-day {
            background-color: #f4f4f4;
            color: #ccc;
            pointer-events: none; 
        }
        .sun-day { color: #dc3545; } 
        .sat-day { color: #007bff; } 
        .schedule-detail-item {
            border: 1px solid #eee;
            padding: 8px;
            margin-bottom: 5px;
            border-left: 3px solid #003366;
            text-align: left;
        }
        
/* -------------------------------------- */
/* ğŸ’¡ ì¥ë¹„ ì¬ê³  ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .equipment-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); /* ë°˜ì‘í˜• ê·¸ë¦¬ë“œ */
            gap: 20px;
            margin-bottom: 20px;
        }
        .equipment-card {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            background-color: #ffffff;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .equipment-card h4 {
            margin-top: 0;
            color: #003366;
        }
        .equipment-card img {
            width: 100%;
            max-height: 120px;
            object-fit: contain; /* ì´ë¯¸ì§€ ë¹„ìœ¨ ìœ ì§€ */
            margin-bottom: 10px;
            border-radius: 4px;
        }
        .stock-count {
            font-size: 1.1em;
            font-weight: bold;
            color: #4CAF50;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <header onclick="showSection('dashboard')">
        <h1>ğŸˆ Mavericks 1 2 3 Team! ğŸˆ</h1>
    </header>

    <nav>
        <a href="#attendance" onclick="showSection('attendance')">âœ… ì¶œì„</a>
        <a href="#notifications" onclick="showSection('notifications'); loadNotifications();">ğŸ“¢ ê³µì§€ì‚¬í•­</a>
        <a href="#calendar" onclick="showSection('calendar'); renderCalendar(currentYear, currentMonth);">ğŸ“… ì¼ì •</a>
        <a href="#stock" onclick="showSection('stock')">ğŸ› ï¸ ì¥ë¹„ ì¬ê³ </a>
        <a href="#team-info" onclick="showSection('team-info')">ğŸ’¡ íŒ€ ì†Œê°œ</a>
    </nav>

    <div class="container">
        <div id="dashboard" class="content-section">
            <h2>ëŒ€ì‹œë³´ë“œ</h2>
            <p>í™˜ì˜í•©ë‹ˆë‹¤! ì˜¤ëŠ˜ì˜ ì£¼ìš” íŒ€ í™œë™ ìš”ì•½ì„ í™•ì¸í•˜ì„¸ìš”.</p>
            <ul id="dashboard-schedule-list">
                </ul>
        </div>
        <div id="attendance" class="content-section hidden">
            <h2>âœ… ì¶œì„ ê´€ë¦¬</h2>
            <p>ì˜¤ëŠ˜ì˜ ì¶œì„ì„ ê¸°ë¡í•©ë‹ˆë‹¤. (ì„ ìˆ˜ìš© í™”ë©´ ì˜ˆì‹œ)</p>
            
            <a href="https://docs.google.com/spreadsheets/d/1h6O6I52Pz8g6QufEH3bcoZPt0tNVO9lr5dSqsC-qo70/edit?usp=drivesdk"
                target="_blank"
                class="attendance-button">
                ì²´í¬ì¸ (ì¶œì„ ê¸°ë¡ í˜ì´ì§€ë¡œ ì´ë™)
            </a>
            
        </div>

        <div id="notifications" class="content-section hidden">
            <h2>ğŸ“¢ ê³µì§€ì‚¬í•­</h2>
            
            <h3>ìƒˆ ê³µì§€ ë“±ë¡ (ê´€ë¦¬ì ì „ìš©)</h3>
            <div class="notification-form">
                <input type="text" id="notiTitle" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                <input type="text" id="notiAuthor" placeholder="ê²Œì‹œì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
                <textarea id="notiContent" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" rows="4"></textarea>
                <button class="submit-button" onclick="addNotification()">ê³µì§€ ë“±ë¡</button>
            </div>

            <hr style="margin: 20px 0;">

            <h3>ì „ì²´ ê³µì§€ ëª©ë¡ (ìµœì‹ ìˆœ)</h3>
            <div id="notificationsList">
                </div>
        </div>

        <div id="calendar" class="content-section hidden">
            <h2>ğŸ“… ì¼ì • ê´€ë¦¬</h2>
            <p>íŒ€ í›ˆë ¨ ë° ê²½ê¸° ìº˜ë¦°ë”ë¥¼ í™•ì¸í•˜ì„¸ìš”. (ì›”ë³„ ë·°)</p>
            
            <div id="calendar-header">
                <button onclick="changeMonth(-1)">&#9664; ì´ì „</button>
                <h3 id="current-month-year">2025ë…„ 10ì›”</h3>
                <button onclick="changeMonth(1)">ë‹¤ìŒ &#9654;</button>
            </div>
            
            <div id="calendar-view">
                <div id="calendar-grid">
                    </div>
            </div>
            
            <hr style="margin: 20px 0;">

            <h3><span id="detail-date-title">ì˜¤ëŠ˜ì˜</span> ì¼ì • ìƒì„¸ ë° ê´€ë¦¬</h3>
            <div id="schedule-details">
                </div>
            
            <hr style="margin: 20px 0;">
            
            <h3>ì¼ì • ë“±ë¡/ìˆ˜ì •</h3>
            <div class="schedule-form">
                <input type="hidden" id="scheduleId"> 
                <input type="text" id="scheduleTitle" placeholder="ì¼ì • ì œëª© (ì˜ˆ: íŒ€ í›ˆë ¨, vs ì˜ë‚¨ëŒ€ ê²½ê¸°)">
                
                <div class="schedule-date-group">
                    <div>
                        <label for="scheduleStartDate">ì‹œì‘ì¼</label>
                        <input type="date" id="scheduleStartDate">
                    </div>
                    <div>
                        <label for="scheduleEndDate">ì¢…ë£Œì¼</label>
                        <input type="date" id="scheduleEndDate">
                    </div>
                </div>

                <textarea id="scheduleContent" placeholder="ìƒì„¸ ë‚´ìš© (ì˜ˆ: ì¥ì†Œ, ì‹œê°„ ë“±)" rows="2"></textarea>
                <button class="action-button" onclick="addOrUpdateSchedule()">ë“±ë¡/ìˆ˜ì •</button>
                <button id="deleteScheduleButton" class="delete-button hidden" onclick="deleteSchedule()">ì‚­ì œ</button>
                <button class="action-button" onclick="resetScheduleForm()">ìƒˆ ì¼ì • ë“±ë¡</button>
            </div>
        </div>

        <div id="stock" class="content-section hidden">
            <div style="display: none;">
                <h2>ğŸ› ï¸ ì¥ë¹„ ì¬ê³  í˜„í™©</h2>
                <p>í˜„ì¬ íŒ€ì´ ë³´ìœ í•˜ê³  ìˆëŠ” ì£¼ìš” ì¥ë¹„ì˜ ì¬ê³  í˜„í™©ì…ë‹ˆë‹¤.</p>
                
                <div class="equipment-list">
                    <div class="equipment-card">
                        <h4>í—¬ë©§ (Helmet)</h4>
                        
                        <p class="stock-count">ì¬ê³ : 25ê°œ</p>
                    </div>
                    <div class="equipment-card">
                        <h4>ìˆ„ë”íŒ¨ë“œ (Shoulder Pad)</h4>
                        
                        <p class="stock-count">ì¬ê³ : 23ê°œ</p>
                    </div>
                    <div class="equipment-card">
                        <h4>ì¶•êµ¬í™” (Cleats)</h4>
                        
                        <p class="stock-count">ì¬ê³ : 15ìŒ</p>
                    </div>
                    <div class="equipment-card">
                        <h4>ë§ˆìš°ìŠ¤í”¼ìŠ¤ (Mouthpiece)</h4>
                        
                        <p class="stock-count">ì¬ê³ : 40ê°œ</p>
                    </div>
                    <div class="equipment-card">
                        <h4>ì¥ê°‘ (Gloves)</h4>
                        
                        <p class="stock-count">ì¬ê³ : 30ìŒ</p>
                    </div>
                    <div class="equipment-card">
                        <h4>ê±°ë“¤ (Girdle)</h4>
                        
                        <p class="stock-count">ì¬ê³ : 18ê°œ</p>
                    </div>
                </div>
                
                <hr>
            </div>
            <h3>ì¥ë¹„ ìš”ì²­</h3>
            <p>í•„ìš”í•œ ì¥ë¹„ê°€ ìˆê±°ë‚˜ ìˆ˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš°, ì•„ë˜ ë§í¬ë¥¼ í†µí•´ ìš”ì²­í•´ ì£¼ì„¸ìš”.</p>
            <a href="https://docs.google.com/spreadsheets/d/1AsJ2DLCkEH0_380CxPRV7OtZZl31B60SvhYlfkGlIbA/edit?usp=drivesdk"
                target="_blank"
                class="request-button">
                ì¶”ê°€ ì¥ë¹„ ìš”ì²­ (ì¬ê³  ê´€ë¦¬ ì‹œíŠ¸ ì´ë™)
            </a>
        </div>

        <div id="team-info" class="content-section hidden">
            <h2>ğŸ’¡ íŒ€ ì†Œê°œ</h2>
            
            <h3>íŒ€ ë¹„ì „ ë° ëª©í‘œ</h3>
            <p>ì¹´ì´ìŠ¤íŠ¸ ë§¤ë²„ë¦­ìŠ¤ëŠ” 2023ë…„ ì°½ë‹¨í•œ êµ­ë‚´ ìœ ì¼ ì¶©ë‚¨ê¶Œ ëŒ€í•™ë¯¸ì‹ì¶•êµ¬ë¶€ì…ë‹ˆë‹¤. ë§¤ë²„ë¦­ìŠ¤ëŠ” ë¯¸ì‹ì¶•êµ¬ë¼ëŠ” ìŠ¤í¬ì¸ ë¥¼ í†µí•´ í•¨ê»˜ ë„ì „í•˜ê³  ì„±ì¥í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ì‚¼ê³  ìˆìŠµë‹ˆë‹¤.</p>

            <h3>ì½”ì¹˜ì§„ ì†Œê°œ</h3>
            <div class="coach-card">
                <h4>í—¤ë“œ ì½”ì¹˜: ê¹€ë„í˜„</h4>
                <p>ê²½ë ¥: (ì „)ê±´êµ­ëŒ€í•™êµ RAGING BULLS, (í˜„)êµ°ìœ„ PHOENIX </p>
                <p>ì „ëµ: íŒ€ í”Œë ˆì´!!</p>
            </div>
            <div class="coach-card">
                <h4>ê³µê²© ì½”ì¹˜: ì´ì›ì² </h4>
                <p>ì£¼ìš” í¬ì§€ì…˜: ì¿¼í„°ë°±, ë¦¬ì‹œë²„</p>
            </div>
            <div class="coach-card">
                <h4>ìˆ˜ë¹„ ì½”ì¹˜: ì•ˆíƒœí˜„</h4>
                <p>ì£¼ìš” í¬ì§€ì…˜: ë””ë¼ì¸, ì˜¤ë¼ì¸</p>
            </div>
            <h3>íŒ€ ì—­ì‚¬</h3>
            <p>2023 ì°½ë‹¨<br>
2024 ì°½ë‹¨ ì²« ì—¬ë¦„í•©ìˆ™í›ˆë ¨(ë™êµ­ëŒ€ TUSKERS, ê¸ˆì˜¤ê³µëŒ€ RAVENS)<br>
2024 ì°½ë‹¨ ì²« ì •ì‹ê²½ê¸° ì°¸ì—¬(ì œì£¼ëŒ€ DEERS)<br>
2025 ì—¬ë¦„í•©ìˆ™í›ˆë ¨ êµë‚´ ìœ ì¹˜(ê±´êµ­ëŒ€ RAGING BULLS, ì˜ë‚¨ëŒ€ PEGASUS)<br>
2025 ì°½ë‹¨ ì²« ëŒ€í•™ë¯¸ì‹ì¶•êµ¬ ì¤‘ë¶€ë¦¬ê·¸ ì°¸ê°€<br></p>
        </div>
    </div>

    <script>
        // Local Storage Key ì •ì˜
        const NOTI_STORAGE_KEY = 'mavericks_notifications';
        const SCHEDULE_STORAGE_KEY = 'mavericks_schedule';

        // --- ë‹¬ë ¥ ê´€ë ¨ ì „ì—­ ë³€ìˆ˜ ---
        const today = new Date();
        let currentYear = today.getFullYear();
        let currentMonth = today.getMonth(); // 0ë¶€í„° ì‹œì‘ (0=1ì›”, 9=10ì›”)
        const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];

        // --- ì¼ì • ê´€ë¦¬ í•¨ìˆ˜ ë° ë°ì´í„° ---

        // ğŸ’¡ ë°ì´í„° êµ¬ì¡° ë³€ê²½: date -> startDate, endDate
        const DEFAULT_SCHEDULE = [
            { id: 1, title: 'íŒ€ í›ˆë ¨', startDate: '2025-10-30', endDate: '2025-10-30', content: 'ì˜¤í›„ 10ì‹œ, ë¶ì¸¡ìš´ë™ì¥' },
            { id: 2, title: 'íŒ€ í›ˆë ¨', startDate: '2025-11-05', endDate: '2025-11-07', content: '3ì¼ê°„ ì˜¤í›„ 7ì‹œ, ë©”ì¸ êµ¬ì¥' }, // ë‹¤ì¼ì • ì˜ˆì‹œ ì¶”ê°€
            { id: 3, title: 'ê²½ê¸° (vs ì˜ë‚¨ëŒ€)', startDate: '2025-11-15', endDate: '2025-11-15', content: 'ì˜¤í›„ 2ì‹œ, ëŒ€ìš´ë™ì¥' },
            { id: 4, title: 'íŒ€ í›ˆë ¨', startDate: '2025-11-20', endDate: '2025-11-20', content: 'ì˜¤í›„ 10ì‹œ, ë¶ì¸¡ìš´ë™ì¥' }
        ];

        function getStoredSchedule() {
            const stored = localStorage.getItem(SCHEDULE_STORAGE_KEY);
            if (stored) {
                try {
                    // ğŸ’¡ ì €ì¥ëœ ë°ì´í„° ë¡œë“œ í›„ 'date' í•„ë“œê°€ ìˆë‹¤ë©´ 'startDate', 'endDate'ë¡œ ë³€í™˜ (í•˜ìœ„ í˜¸í™˜ì„±)
                    const parsedData = JSON.parse(stored);
                    if (parsedData.length > 0 && parsedData[0].date) {
                        return parsedData.map(item => ({
                            id: item.id,
                            title: item.title,
                            startDate: item.date,
                            endDate: item.date,
                            content: item.content
                        }));
                    }
                    return parsedData;
                } catch (e) {
                    console.error("Failed to parse stored schedule:", e);
                    saveSchedule(DEFAULT_SCHEDULE);
                    return DEFAULT_SCHEDULE;
                }
            }
            saveSchedule(DEFAULT_SCHEDULE);
            return DEFAULT_SCHEDULE;
        }

        function saveSchedule(data) {
            // ğŸ’¡ ì‹œì‘ ë‚ ì§œ ìˆœìœ¼ë¡œ ì •ë ¬
            data.sort((a, b) => new Date(a.startDate) - new Date(b.startDate));
            localStorage.setItem(SCHEDULE_STORAGE_KEY, JSON.stringify(data));
        }

        let scheduleData = getStoredSchedule();
        
        /**
         * YYYY-MM-DD í˜•ì‹ìœ¼ë¡œ ë‚ ì§œë¥¼ í¬ë§·í•©ë‹ˆë‹¤.
         */
        function formatDate(dateObj) {
            const year = dateObj.getFullYear();
            const month = String(dateObj.getMonth() + 1).padStart(2, '0');
            const day = String(dateObj.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // ----------------------------------------------------
        // ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì‹œì‘ì¼/ì¢…ë£Œì¼ ë°˜ì˜)
        // ----------------------------------------------------

        /**
         * ë‹¤ê°€ì˜¤ëŠ” í›ˆë ¨ ë° ê²½ê¸° ì¼ì •ì„ ì°¾ì•„ ëŒ€ì‹œë³´ë“œë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
         */
        function updateDashboardSchedule() {
            const list = document.getElementById('dashboard-schedule-list');
            list.innerHTML = '';
            
            const todayDate = formatDate(new Date());
            
            // ğŸ’¡ ë‹¤ê°€ì˜¤ëŠ” ì¼ì • í•„í„°ë§: ì¢…ë£Œì¼ì´ ì˜¤ëŠ˜ì´ê±°ë‚˜ ì˜¤ëŠ˜ ì´í›„ì¸ ì´ë²¤íŠ¸ë§Œ í¬í•¨
            const upcomingSchedule = scheduleData
                .filter(item => item.endDate >= todayDate) 
                .sort((a, b) => new Date(a.startDate) - new Date(b.startDate));

            const nextTraining = upcomingSchedule.find(item => item.title.includes('í›ˆë ¨'));
            const nextGame = upcomingSchedule.find(item => item.title.includes('ê²½ê¸°'));
            
            let trainingText = 'ê°€ê¹Œìš´ í›ˆë ¨ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.';
            let gameText = 'ê°€ê¹Œìš´ ê²½ê¸° ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.';

            // ğŸ’¡ ë‚ ì§œ ë²”ìœ„ í¬ë§·íŒ… í—¬í¼ í•¨ìˆ˜
            const formatScheduleDate = (item) => {
                const [startMonth, startDay] = item.startDate.substring(5).split('-');
                let dateDisplay = `${startMonth}/${startDay}`;

                if (item.startDate !== item.endDate) {
                    const [endMonth, endDay] = item.endDate.substring(5).split('-');
                    // ì›”ì´ ê°™ìœ¼ë©´ ì¼ë§Œ í‘œì‹œ, ë‹¤ë¥´ë©´ ì›”/ì¼ ëª¨ë‘ í‘œì‹œ
                    if (startMonth === endMonth) {
                        dateDisplay += ` - ${endDay}`;
                    } else {
                        dateDisplay += ` - ${endMonth}/${endDay}`;
                    }
                }
                return dateDisplay;
            };


            if (nextTraining) {
                const dateDisplay = formatScheduleDate(nextTraining);
                trainingText = `${dateDisplay} ${nextTraining.content || ''}`;
            }

            if (nextGame) {
                const dateDisplay = formatScheduleDate(nextGame);
                gameText = `${dateDisplay} ${nextGame.title} ${nextGame.content ? '(' + nextGame.content + ')' : ''}`;
            }

            // ëŒ€ì‹œë³´ë“œ ëª©ë¡ì— ì¶”ê°€
            const trainingItem = document.createElement('li');
            trainingItem.innerHTML = `**ê°€ì¥ ê°€ê¹Œìš´ í›ˆë ¨:** ${trainingText}`;
            list.appendChild(trainingItem);
            
            const gameItem = document.createElement('li');
            gameItem.innerHTML = `**ê°€ì¥ ê°€ê¹Œìš´ ê²½ê¸°:** ${gameText}`;
            list.appendChild(gameItem);
        }
        // ----------------------------------------------------


        /**
         * ë‹¬ë ¥ì„ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜ (ì‹œì‘ì¼/ì¢…ë£Œì¼ ë°˜ì˜)
         */
        function renderCalendar(year, month) {
            const calendarGrid = document.getElementById('calendar-grid');
            const monthYearDisplay = document.getElementById('current-month-year');
            calendarGrid.innerHTML = ''; 

            monthYearDisplay.textContent = `${year}ë…„ ${month + 1}ì›”`;

            // 1. ìš”ì¼ í—¤ë” ì¶”ê°€
            dayNames.forEach((day, index) => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'day-header';
                if (index === 0) dayHeader.classList.add('sun-day');
                if (index === 6) dayHeader.classList.add('sat-day');
                dayHeader.textContent = day;
                calendarGrid.appendChild(dayHeader);
            });

            const firstDayOfMonth = new Date(year, month, 1);
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const startDayOfWeek = firstDayOfMonth.getDay();

            let date = 1;

            // 2. ë¹ˆ ë‚ ì§œ(ì´ì „ ë‹¬) ì±„ìš°ê¸°
            for (let i = 0; i < startDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day empty-day';
                calendarGrid.appendChild(emptyDay);
            }

            // 3. í•´ë‹¹ ì›”ì˜ ë‚ ì§œ ì±„ìš°ê¸°
            for (let i = 0; i < daysInMonth; i++) {
                const calendarDay = document.createElement('div');
                
                const dayOfWeek = (startDayOfWeek + i) % 7;
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
                
                calendarDay.dataset.date = dateString; 
                calendarDay.className = 'calendar-day';
                calendarDay.onclick = () => handleDayClick(dateString); 

                calendarDay.innerHTML = `<div>${date}</div>`;
                
                // ì˜¤ëŠ˜ ë‚ ì§œ í‘œì‹œ
                if (year === today.getFullYear() && month === today.getMonth() && date === today.getDate()) {
                    calendarDay.classList.add('today');
                }

                // ì£¼ë§ ìƒ‰ìƒ ì ìš©
                if (dayOfWeek === 0) calendarDay.classList.add('sun-day');
                if (dayOfWeek === 6) calendarDay.classList.add('sat-day');

                // ğŸ’¡ ì¼ì • í‘œì‹œ: í•´ë‹¹ ë‚ ì§œê°€ ì¼ì •ì˜ startDateì™€ endDate ì‚¬ì´ì— ìˆëŠ”ì§€ í™•ì¸
                const daySchedule = scheduleData.filter(item => {
                    return dateString >= item.startDate && dateString <= item.endDate;
                });

                if (daySchedule.length > 0) {
                    calendarDay.classList.add('training-day');
                    calendarDay.title = daySchedule.map(item => item.title).join(', ');
                    calendarDay.innerHTML += `<small>${daySchedule[0].title.split(' ')[0]}</small>`; 
                }
                
                calendarGrid.appendChild(calendarDay);
                date++;
            }
            
            // ë‹¬ë ¥ ë Œë”ë§ í›„, ì˜¤ëŠ˜ ë‚ ì§œì˜ ìƒì„¸ ì¼ì •ì„ ë¡œë“œ
            handleDayClick(formatDate(new Date())); 
        }


        /**
         * ë‹¬ë ¥ì˜ ë‚ ì§œë¥¼ í´ë¦­í–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ (ì‹œì‘ì¼/ì¢…ë£Œì¼ ë°˜ì˜)
         */
        function handleDayClick(dateString) {
            const scheduleDetails = document.getElementById('schedule-details');
            const detailDateTitle = document.getElementById('detail-date-title');
            
            scheduleDetails.innerHTML = '';
            
            // ë‚ ì§œ ì œëª© ì—…ë°ì´íŠ¸
            const [year, month, day] = dateString.split('-');
            const dateObj = new Date(year, month - 1, day);
            detailDateTitle.textContent = `${month}ì›” ${day}ì¼ (${dayNames[dateObj.getDay()]})ì˜`;

            // ğŸ’¡ í¼ ì´ˆê¸°í™” ë° ë‚ ì§œ ì„¤ì •: í´ë¦­ëœ ë‚ ì§œë¡œ ì‹œì‘ì¼/ì¢…ë£Œì¼ ëª¨ë‘ ì„¤ì •
            resetScheduleForm();
            document.getElementById('scheduleStartDate').value = dateString;
            document.getElementById('scheduleEndDate').value = dateString;

            // ğŸ’¡ í•´ë‹¹ ë‚ ì§œì— ê±¸ì³ ìˆëŠ” ì¼ì • í•„í„°ë§
            const daySchedule = scheduleData.filter(item => {
                return dateString >= item.startDate && dateString <= item.endDate;
            });

            if (daySchedule.length === 0) {
                scheduleDetails.innerHTML = '<p>ë“±ë¡ëœ ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                daySchedule.forEach(item => {
                    const detailItem = document.createElement('div');
                    detailItem.className = 'schedule-detail-item';
                    
                    let dateRangeDisplay = item.startDate;
                    if (item.startDate !== item.endDate) {
                        dateRangeDisplay += ` ~ ${item.endDate}`;
                    }

                    detailItem.innerHTML = `
                        <strong>${item.title}</strong>
                        <p style="margin: 5px 0 0 0; font-size: 0.9em; color: #555;">ê¸°ê°„: ${dateRangeDisplay}</p>
                        <p style="margin: 5px 0 0 0; font-size: 0.9em;">${item.content ? item.content.replace(/\n/g, '<br>') : 'ìƒì„¸ ë‚´ìš© ì—†ìŒ'}</p>
                        <button class="action-button" style="padding: 5px 10px; font-size: 0.8em; margin-top: 5px;" 
                                onclick="loadScheduleForEdit(${item.id})">ìˆ˜ì •</button>
                    `;
                    scheduleDetails.appendChild(detailItem);
                });
            }
        }
        
        /**
         * íŠ¹ì • ì¼ì •ì„ í¼ì— ë¡œë“œí•˜ì—¬ ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜ (ì‹œì‘ì¼/ì¢…ë£Œì¼ ë°˜ì˜)
         */
        function loadScheduleForEdit(id) {
            const item = scheduleData.find(s => s.id === id);
            if (!item) {
                alert('ì¼ì •ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            document.getElementById('scheduleId').value = item.id;
            document.getElementById('scheduleTitle').value = item.title;
            // ğŸ’¡ ì‹œì‘ì¼/ì¢…ë£Œì¼ ë¡œë“œ
            document.getElementById('scheduleStartDate').value = item.startDate;
            document.getElementById('scheduleEndDate').value = item.endDate;
            document.getElementById('scheduleContent').value = item.content || '';
            document.getElementById('deleteScheduleButton').classList.remove('hidden');
            alert(`ID ${item.id} ì¼ì • (${item.title})ì´ ìˆ˜ì • ëª¨ë“œë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }
        
        /**
         * ì¼ì • ë“±ë¡ ë˜ëŠ” ìˆ˜ì • ì²˜ë¦¬ (ì‹œì‘ì¼/ì¢…ë£Œì¼ ë°˜ì˜)
         */
        function addOrUpdateSchedule() {
            const id = document.getElementById('scheduleId').value;
            const title = document.getElementById('scheduleTitle').value.trim();
            // ğŸ’¡ ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ ì…ë ¥ ë°›ê¸°
            const startDate = document.getElementById('scheduleStartDate').value;
            const endDate = document.getElementById('scheduleEndDate').value;
            const content = document.getElementById('scheduleContent').value.trim();

            if (!title || !startDate || !endDate) {
                alert("ì œëª©, ì‹œì‘ ë‚ ì§œ, ì¢…ë£Œ ë‚ ì§œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            // ğŸ’¡ ìœ íš¨ì„± ê²€ì‚¬: ì¢…ë£Œ ë‚ ì§œëŠ” ì‹œì‘ ë‚ ì§œë³´ë‹¤ ë¹ ë¥¼ ìˆ˜ ì—†ìŒ
            if (new Date(startDate) > new Date(endDate)) {
                alert("ì¢…ë£Œ ë‚ ì§œëŠ” ì‹œì‘ ë‚ ì§œë³´ë‹¤ ë¹ ë¥¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‚ ì§œë¥¼ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");
                return;
            }
            
            if (id) {
                // ìˆ˜ì •
                const index = scheduleData.findIndex(s => s.id === parseInt(id));
                if (index !== -1) {
                    // ğŸ’¡ startDate, endDateë¡œ ì—…ë°ì´íŠ¸
                    scheduleData[index] = { id: parseInt(id), title, startDate, endDate, content };
                    alert("ì¼ì •ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.");
                }
            } else {
                // ë“±ë¡
                const newId = scheduleData.length > 0 ? Math.max(...scheduleData.map(s => s.id)) + 1 : 1;
                // ğŸ’¡ startDate, endDateë¡œ ì €ì¥
                scheduleData.push({ id: newId, title, startDate, endDate, content });
                alert("ìƒˆ ì¼ì •ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
            }

            saveSchedule(scheduleData);
            renderCalendar(currentYear, currentMonth); // ë‹¬ë ¥ ë° ìƒì„¸ ëª©ë¡ ì—…ë°ì´íŠ¸
            handleDayClick(startDate); // ìˆ˜ì •/ë“±ë¡ëœ ì¼ì •ì˜ ì‹œì‘ ë‚ ì§œ ìƒì„¸ ëª©ë¡ ì¬ë¡œë“œ
            resetScheduleForm();
            updateDashboardSchedule(); 
        }

        /**
         * ì¼ì • ì‚­ì œ ì²˜ë¦¬
         */
        function deleteSchedule() {
            const id = document.getElementById('scheduleId').value;
            const date = document.getElementById('scheduleStartDate').value; // ì‚­ì œ í›„ ìƒì„¸ ëª©ë¡ì„ ë¡œë“œí•  ë‚ ì§œ
            if (!id || !confirm('ì •ë§ë¡œ ì´ ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            scheduleData = scheduleData.filter(s => s.id !== parseInt(id));
            saveSchedule(scheduleData);
            
            alert("ì¼ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
            
            renderCalendar(currentYear, currentMonth); 
            handleDayClick(date); 
            resetScheduleForm();
            updateDashboardSchedule(); 
        }
        
        /**
         * ì¼ì • í¼ ì´ˆê¸°í™” (ì‹œì‘ì¼/ì¢…ë£Œì¼ ë°˜ì˜)
         */
        function resetScheduleForm() {
            const todayString = formatDate(new Date());
            document.getElementById('scheduleId').value = '';
            document.getElementById('scheduleTitle').value = '';
            // ğŸ’¡ ì‹œì‘ì¼/ì¢…ë£Œì¼ ëª¨ë‘ ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸°í™”
            document.getElementById('scheduleStartDate').value = todayString; 
            document.getElementById('scheduleEndDate').value = todayString; 
            document.getElementById('scheduleContent').value = '';
            document.getElementById('deleteScheduleButton').classList.add('hidden');
        }


        /**
         * ì›” ë³€ê²½ ë²„íŠ¼ ì²˜ë¦¬ í•¨ìˆ˜
         */
        function changeMonth(delta) {
            currentMonth += delta;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            } else if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            renderCalendar(currentYear, currentMonth);
        }

        // --- ê¸°ì¡´ ê¸°ëŠ¥ (ê³µì§€ì‚¬í•­ ë° ì„¹ì…˜ ì „í™˜ - ë³€ê²½ ì—†ìŒ) ---
        
        // ì„¹ì…˜ ì „í™˜ í•¨ìˆ˜
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });

            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                
                // ë‹¬ë ¥ íƒ­ìœ¼ë¡œ ì „í™˜ ì‹œ ë‹¬ë ¥ ë Œë”ë§ì„ ì´ˆê¸°í™”
                if (sectionId === 'calendar') {
                    // í˜„ì¬ ì—°ë„ì™€ ì›”ë¡œ ë‹¬ë ¥ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
                    resetScheduleForm(); // í¼ë„ ì´ˆê¸°í™”
                    renderCalendar(currentYear, currentMonth);
                } else if (sectionId === 'dashboard') {
                    updateDashboardSchedule(); 
                }
            }
        }
        
        const DEFAULT_NOTIFICATIONS = [
            {
                title: "[í•„ë…] 2025 ë§¤ë²„ë¦­ìŠ¤ ê°€ì„MT ìˆ˜ìš”ì¡°ì‚¬",
                content: "ê°€ì„ MT ë‚ ì§œ ìˆ˜ìš”ì¡°ì‚¬ë¥¼ ë°›ê² ìŠµë‹ˆë‹¤.<br>ìœ„ì¹˜ëŠ” ê³„ë£¡ì…ë‹ˆë‹¤.<br><br>We will survey for demand to a fall semester MT to Gyeryong.<br>Vote for any date that you are able to join",
                author: "ì´ê·¼ì˜",
                date: "2025-10-29"
            },
            {
                title: "ì˜¤ëŠ˜ í›ˆë ¨ ì¥ì†Œ ë³€ê²½ ì—†ìŒ ê³µì§€",
                content: "ì˜¤ëŠ˜ í›ˆë ¨ ì¥ì†ŒëŠ” ê¸°ì¡´ëŒ€ë¡œ ë¶ì¸¡ìš´ë™ì¥ì…ë‹ˆë‹¤. í˜¼ì„  ì—†ìœ¼ì‹œê¸° ë°”ëë‹ˆë‹¤.",
                author: "ì„ê·œì„±",
                date: "2025-10-29"
            }
        ];
        
        function getStoredNotifications() {
            const stored = localStorage.getItem(NOTI_STORAGE_KEY);
            if (stored) {
                try {
                    return JSON.parse(stored);
                } catch (e) {
                    console.error("Failed to parse stored notifications:", e);
                    saveNotifications(DEFAULT_NOTIFICATIONS);
                    return DEFAULT_NOTIFICATIONS;
                }
            }
            saveNotifications(DEFAULT_NOTIFICATIONS);
            return DEFAULT_NOTIFICATIONS;
        }

        function saveNotifications(data) {
            localStorage.setItem(NOTI_STORAGE_KEY, JSON.stringify(data));
        }

        let notificationsData = getStoredNotifications();

        function loadNotifications() {
            const list = document.getElementById('notificationsList');
            list.innerHTML = ''; 

            notificationsData.forEach(noti => {
                const item = document.createElement('div');
                item.className = 'notification-item';
                let contentHTML = noti.content ? `<p>${noti.content.replace(/\n/g, '<br>')}</p>` : '';
                item.innerHTML = `
                    <h4>${noti.title}</h4>
                    <small>ê²Œì‹œì¼: ${noti.date} | ê²Œì‹œì: ${noti.author}</small>
                    ${contentHTML}
                `;
                list.appendChild(item);
            });
        }
        
        function addNotification() {
            const title = document.getElementById('notiTitle').value.trim();
            const author = document.getElementById('notiAuthor').value.trim();
            const content = document.getElementById('notiContent').value.trim();

            if (!title || !author) {
                alert("ì œëª©ê³¼ ê²Œì‹œìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                return;
            }

            const today = new Date();
            const dateString = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
            
            const newNoti = {
                title: title,
                content: content,
                author: author,
                date: dateString
            };

            notificationsData.unshift(newNoti);
            saveNotifications(notificationsData);
            loadNotifications();

            document.getElementById('notiTitle').value = '';
            document.getElementById('notiAuthor').value = '';
            document.getElementById('notiContent').value = '';
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ€ì‹œë³´ë“œë¥¼ ë¨¼ì € ë³´ì—¬ì£¼ê³  ì¼ì • ë°ì´í„° ë¡œë“œ
        window.addEventListener('DOMContentLoaded', () => {
            updateDashboardSchedule(); // ëŒ€ì‹œë³´ë“œ ì¼ì • ì—…ë°ì´íŠ¸
            showSection('dashboard'); // ëŒ€ì‹œë³´ë“œ í‘œì‹œ
        });
    </script>
</body>
</html>
